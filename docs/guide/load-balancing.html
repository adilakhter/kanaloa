<html><head><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><title>Kanaloa</title><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="description" content="For your resiliency - traffic control with adaptive concurrency throttling." /><meta name="author" content="Kanaloa contributors" /><meta name="og:image" content="/kanaloa/img/poster.png" /><meta name="og:title" content="Kanaloa" /><meta name="og:site_name" content="Kanaloa" /><meta name="og:url" content="http://iheartradio.github.io/kanaloa" /><meta name="og:type" content="website" /><meta name="og:description" content="For your resiliency - traffic control with adaptive concurrency throttling." /><meta name="twitter:image" content="/kanaloa/img/poster.png" /><meta name="twitter:card" content="summary_large_image" /><meta name="twitter:site" content="" /><link rel="icon" type="image/png" href="/kanaloa/img/favicon.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/kanaloa/highlight/styles/atom-one-light.css" /><link rel="stylesheet" href="/kanaloa/css/style.css" /><link rel="stylesheet" href="/kanaloa/css/palette.css" /><link rel="stylesheet" href="/kanaloa/css/override.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><ul id="sidebar" class="sidebar-nav"><li class="sidebar-brand"><a href="/kanaloa/" class="brand"><div class="brand-wrapper" style="background:url('/kanaloa/img/sidebar_brand.png') no-repeat"><span>Kanaloa</span></div></a></li> <li><a href="/kanaloa/docs/guide/backpressure.html" class="">Backpressure</a></li> <li><a href="/kanaloa/docs/guide/circuit-breaker.html" class="">Circuit Breaker</a></li> <li><a href="/kanaloa/docs/guide/monitor.html" class="">Realtime Monitor</a></li> <li><a href="/kanaloa/docs/guide/at-least-once.html" class="">At-least-once Delivery</a></li> <li><a href="/kanaloa/docs/guide/load-balancing.html" class=" active ">Kanaloa and Load Balancing</a></li></ul></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li class="hidden-xs"><a href="https://github.com/iheartradio/kanaloa"><i class="fa fa-eye"></i><span>WATCH<span id="eyes" class="label label-default">--</span></span></a></li><li class="hidden-xs"><a href="https://github.com/iheartradio/kanaloa"><i class="fa fa-star-o"></i><span>STARS<span id="stars" class="label label-default">--</span></span></a></li><li><a href="#" onclick="shareSiteTwitter('Kanaloa For your resiliency - traffic control with adaptive concurrency throttling.');"><i class="fa fa-twitter"></i></a></li><li><a href="#" onclick="shareSiteFacebook('Kanaloa For your resiliency - traffic control with adaptive concurrency throttling.');"><i class="fa fa-facebook"></i></a></li><li><a href="#" onclick="shareSiteGoogle();"><i class="fa fa-google-plus"></i></a></li></ul></div></div></div></div><div id="content" data-github-owner="iheartradio" data-github-repo="kanaloa"><div class="content-wrapper"><section><h2 id="proportional-load-balancing">Proportional Load Balancing</h2>

<p>Naturally, when you have multiple instances of the service, you need to load balance between them. If you use your own load balancer, make sure you place a kanaloa proxy between each instance and the load balancer. It’s not recommended to put kanaloa in front of the load balancer because it’s more efficient and accurate for kanaloa to throttle each different instance than all of them combined as a whole.</p>

<p>Kanaloa itself can load balance between multiple instances. It throttles each instance separately, and send traffic proportional to their latencies.  It achieves this proportional traffic allocation through its internal worker pulling model - slow workers pull slowly. Kanaloa load balancing is especially valuable when one of the backends degrade to an unusable state, in which case the kanaloa will send only minimum traffic towards it (it sends minimum traffic so that kanaloa can detect when the backend recovers back to normal capacity. )</p>

<p>To use kanaloa as a load balancer, <code class="highlighter-rouge">HandlerProvider</code> needs to be implemented to support locating the service instances. An Akka cluster based implementation is out of the box in</p>

<pre><code class="language-Scala">"com.iheart" %% "kanaloa-cluster" % version
</code></pre>
</section></div></div></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/kanaloa/highlight/highlight.pack.js"></script><script>hljs.configure({
languages:['scala','java','bash']
});
hljs.initHighlighting();
             </script><script src="/kanaloa/js/main.js"></script></body></html>